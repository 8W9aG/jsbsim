<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="http://www.jsbsim.org/JSBSimScript.xsl"?>
<runscript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://www.jsbsim.org/JSBSimScript.xsd"
    name="OV-10 runway test">
  <description>For testing OV-10 ground reactions</description>
  <use aircraft="ov10" initialize="reset00"/>
  <run start="0.0" end="100" dt="0.00833333">

    <event name="On-ground trim">
      <description>The aircraft is trimmed on-ground.</description>
      <condition>sim-time-sec ge 0.25</condition>
      <set name="simulation/do_trim" value="2"/> <!-- on-ground trim -->
      <notify/>
    </event>

    <event name="Start engine: Starter">
      <description>The starter for both engines is turned on.</description>
      <condition>sim-time-sec ge 10.0</condition>
      <set name="propulsion/starter_cmd" value="1"/>
      <notify/>
    </event>

    <event name="Start engine: Cutoff">
      <description>Cutoff is turned off, allowing fuel to flow.</description>
      <condition>propulsion/engine[0]/n2 ge 15.0</condition>
      <set name="propulsion/cutoff_cmd" value="0"/>
      <set name="fcs/throttle-cmd-norm[0]" value="0.4"/>
      <set name="fcs/throttle-cmd-norm[1]" value="0.4"/>
      <notify>
        <property>propulsion/engine[0]/n2</property>
        <property>propulsion/engine[1]/n2</property>
        <property>propulsion/starter_cmd</property>
        <property>propulsion/engine[0]/thrust</property>
        <property>propulsion/engine[1]/thrust</property>
      </notify>
    </event>

    <event name="Throttle-up">
      <description>Move throttle to full for take-off.</description>
      <condition>propulsion/engine[0]/n2 ge 15.0</condition>
      <delay>5.0</delay>
      <set name="fcs/throttle-cmd-norm[0]" value="1.0"/>
      <set name="fcs/throttle-cmd-norm[1]" value="1.0"/>
      <notify>
        <property>propulsion/engine[0]/n2</property>
        <property>propulsion/engine[1]/n2</property>
        <property>propulsion/engine[0]/thrust</property>
        <property>propulsion/engine[1]/thrust</property>
        <property>velocities/vc-kts</property>
      </notify>
    </event>

    <event name="Notify Velocity">
      <description>Notify when velocity goes above 10 kts.</description>
      <condition>velocities/vc-kts ge 10.0</condition>
      <notify>
        <property>propulsion/engine[0]/n2</property>
        <property>propulsion/engine[1]/n2</property>
        <property>propulsion/engine[0]/thrust</property>
        <property>propulsion/engine[1]/thrust</property>
        <property>velocities/vc-kts</property>
      </notify>
    </event>

  </run>

</runscript>
