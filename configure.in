AC_INIT(JSBSim.cpp)

AM_INIT_AUTOMAKE(JSBSim, 0.9.1)

AM_CONFIG_HEADER(config.h)

AM_MAINTAINER_MODE

AC_ISC_POSIX
AC_PROG_CPP
AC_PROG_CXX

dnl The bone of contention
dnl AM_PROG_LIBTOOL
AC_PROG_RANLIB

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)

AC_CHECK_HEADER(dislin.h)
AM_CONDITIONAL(ENABLE_SIMPLOT, test "x$ac_cv_header_dislin_h" = "xyes")  

AC_CANONICAL_HOST

WFLAG="-Wall"
AR="ar"

case "$host" in
mips-sgi-irix*)
    if test "x$CXX" = "xCC"; then
        WFLAG="-fullwarn";
        AR="CC -ar"
        AC_SUBST(AR)
    fi
    ;;
esac

CFLAGS="$CFLAGS $WFLAG"
CXXFLAGS="$CXXFLAGS $WFLAG"


AC_OUTPUT([
Makefile
aircraft/X15/Makefile
aircraft/c172/Makefile
aircraft/c310/Makefile
aircraft/shuttle/Makefile
aircraft/c182/Makefile
aircraft/mk82/Makefile
aircraft/pa28/Makefile
aircraft/f16/Makefile
aircraft/Makefile
engine/Makefile
filtersjb/Makefile
scripts/Makefile
tools/Makefile
utilities/Makefile
simgear/Makefile
simgear/misc/Makefile
])
