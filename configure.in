AC_INIT(JSBSim.cpp)

AM_INIT_AUTOMAKE(JSBSim, 0.9.5alpha)

AM_CONFIG_HEADER(config.h)

AM_MAINTAINER_MODE

AC_ISC_POSIX
AC_PROG_CPP
AC_PROG_CXX

dnl The bone of contention
dnl AM_PROG_LIBTOOL
AC_PROG_RANLIB

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)

AC_CHECK_HEADER(dislin.h)
AM_CONDITIONAL(ENABLE_SIMPLOT, test "x$ac_cv_header_dislin_h" = "xyes")  

dnl set the $host variable based on local machine/os
AC_CANONICAL_HOST

case "$host" in
mips-sgi-irix*)
    if test "x$CXX" = "xCC" -o "x$CXX" = "xccache CC"; then
        WFLAG="-fullwarn";
        AR="CC -ar"
        AC_SUBST(AR)
        ARFLAGS="-o"
    else
        WFLAG="-Wall"
        AR="ar"
        ARFLAGS="cru"
    fi
    ;;
*)
    WFLAG="-Wall"
    AR="ar"
    ARFLAGS="cru"
    ;;
esac
AC_SUBST(AR)
AC_SUBST(ARFLAGS)

CFLAGS="$CFLAGS $WFLAG"
CXXFLAGS="$CXXFLAGS $WFLAG"


AC_OUTPUT([
Makefile
aeromatic/Makefile \
aircraft/737/Makefile \
aircraft/A320/Makefile \
aircraft/B747/Makefile \
aircraft/LM/Makefile \
aircraft/OV10/Makefile \
aircraft/SGS/Makefile \
aircraft/T38/Makefile \
aircraft/X15/Makefile \
aircraft/c172p/Makefile \
aircraft/c172r/Makefile \
aircraft/c172x/Makefile \
aircraft/c182/Makefile \
aircraft/c310/Makefile \
aircraft/f15/Makefile \
aircraft/f16/Makefile \
aircraft/f22/Makefile \
aircraft/f104/Makefile \
aircraft/fokker50/Makefile \
aircraft/fokker100/Makefile \
aircraft/minisgs/Makefile \
aircraft/mk82/Makefile \
aircraft/p51d/Makefile \
aircraft/pa28/Makefile \
aircraft/paraglider/Makefile \
aircraft/sgs126/Makefile \
aircraft/shuttle/Makefile \
aircraft/t6texan2/Makefile \
aircraft/x24b/Makefile \
aircraft/Makefile \
datcom/Makefile \
engine/Makefile \
filtersjb/Makefile \
scripts/Makefile \
tools/Makefile \
utilities/Makefile \
simgear/Makefile \
simgear/props/Makefile \
])
